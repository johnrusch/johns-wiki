---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { Image } from 'astro:assets';

export async function getStaticPaths() {
    const musicItems = await getCollection('items', ({ data, id }) => {
        return !data.draft && id.startsWith('music');
    })
    return musicItems.map(entry => {
        const slug = entry.slug.split("/")[1];
        return {params: { slug }, props: { entry }}
    });

}

const { entry } = Astro.props;
const { Content } = await entry.render();

---

<BaseLayout title={entry.data.title}>
    <main class="page-container">
        <section class="page-text">
            <Content />
        </section>
        <section class="page-image">
            <Image src={entry.data.image} alt={entry.data.title} />
        </section>
    </main>
</BaseLayout>
<!-- <h1>{entry.data.title}</h1> -->